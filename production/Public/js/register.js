$(function(){var n=function(){function n(n,t){return!!t(n.val())}function t(){$("#shelter .resContent ul li input").removeClass("wrongput")}function e(){$.ajax({type:"POST",url:"/index/Index/login/index",data:{idname:h.val(),idpassword:p.val(),username:f.val(),password:g.val(),email:C.val(),verify:m.val()},dataType:"json",success:function(n,e){if(1==n.valid){$("#shelter").css("display","none"),t();var a=$(".login");a.html("<button class='btn btn-default dropdown-toggle' type='button' id='dropdownMenu1' data-toggle='dropdown' aria-haspopup='true' aria-expanded='true'>Dropdown<span class='caret'></span></button>  <ul class='dropdown-menu' aria-labelledby='dropdownMenu1'><li><a href='#'>Action</a></li><li><a href='#'>Another action</a></li><li><a href='#'>Something else here</a></li><li><a href='#'>Separated link</a></li></ul>")}else v.addClass("wrong").text(n.message)}})}function a(){i=n(h,function(n){return!(!n.match(/^\S+$/)||9!=n.length||"B"!=n.charAt(0))}),d=n(C,function(n){return!!(n.match(/\w+@\w+.\w/)&&n.length>8&&n.length<25)}),c=n(p,function(n){return 0!=n.length}),o=n(f,function(n){return!!(n.match(/^\S+$/)&&n.length>=3&&n.length<=16)}),s=n(g,function(n){return!!(n.match(/^\S+$/)&&n.length>=6&&n.length<=16)}),u=n(m,function(n){return 4==n.length}),i?c?o?s?c?u||(t(),m.addClass("wrongput"),l(),v.text("验证码格式错误！")):(t(),m.addClass("wrongput"),l(),v.text("邮箱格式错误！")):(t(),g.addClass("wrongput"),l(),v.text("密码格式错误！")):(t(),f.addClass("wrongput"),l(),v.text("用户名格式错误！")):(t(),p.addClass("wrongput"),l(),v.text("正方密码不能为空！")):(t(),h.addClass("wrongput"),l(),v.text("学号格式不对！")),o&&s&&u&&i&&d&&c&&(t(),e())}function l(){v.addClass("wrong")}function r(n){var t=n.which;13==t&&a()}var o,s,u,i,d,c,h=$("#shelter .resContent ul li .idname"),p=$("#shelter .resContent ul li .idpw"),f=$("#shelter .resContent ul li .username"),g=$("#shelter .resContent ul li .password"),w=$("#shelter .resContent .sub"),C=$("#shelter .resContent .mail"),m=$("#shelter .resContent ul li .ver"),v=$("#shelter .resContent .tip2");$("#shelter .conshelter");w.click(function(){a()}),f.keyup(function(n){r(n)}),g.keyup(function(n){r(n)}),m.keyup(function(n){r(n)}),h.keyup(function(n){r(n)}),p.keyup(function(n){r(n)}),C.keyup(function(n){r(n)})};n()});