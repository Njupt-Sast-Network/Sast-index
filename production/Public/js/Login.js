$(function(){var e=function(){function e(e,n){return!!n(e.val())}function n(){$.ajax({type:"POST",url:"/index.php/Index/Login/login",data:{username:a.val(),password:c.val(),verify:u.val()},dataType:"json",success:function(e){1==e.valid?($("#shelter").css("display","none"),d.css("height","300px"),h.css("top","160px"),l(),$(".contentLi").find("#user").remove(),$(".contentLi").append("<li><a href='ddd'>"+e.username+"</a></li>"),$(".contentLi").append("<li><a href='/Index/Login/logout'>退出</a></li>"),$(".hideBar").css("height","360px"),$("nav.nav .hideBar ul li .searchBar").css("width","500px")):(s(),fleshVerify(document.getElementById("Verifyimg")),p.addClass("wrong").text(e.message))}})}function t(){o=e(a,function(e){return!!(e.match(/^\S+$/)&&e.length>=3&&e.length<=16)}),i=e(c,function(e){return!!(e.match(/^\S+$/)&&e.length>=6&&e.length<=16)}),r=e(u,function(e){return 4==e.length}),o?i?r?(l(),n()):(l(),u.addClass("wrongput"),s(),p.text("验证码格式错误！")):(l(),c.addClass("wrongput"),s(),p.text("密码格式错误！")):(l(),a.addClass("wrongput"),s(),p.text("用户名格式错误！"))}function s(){d.css("height","320px"),h.css("top","180px"),p.addClass("wrong")}function l(){}var o,i,r,a=$("#shelter .loginContent ul li .username"),c=$("#shelter .loginContent ul li .password"),h=$("#shelter .loginContent .sub"),u=$("#shelter .loginContent ul li .ver"),d=$("#shelter .conshelter"),p=$("#shelter .loginContent .tip");p.click(function(){console.log(1)}),h.click(function(){t()}),a.keyup(function(e){var n=e.which;13==n&&t()}),c.keyup(function(e){var n=e.which;13==n&&t()}),u.keyup(function(e){var n=e.which;13==n&&t()}),$("#shelter .conshelter .closed").click(function(){$("#shelter").css("display","none"),d.css("height","300px"),h.css("top","160px"),l(),a.val(""),c.val(""),u.val(""),p.removeClass("wrong")});(function(){var e=$("#shelter .loginContent"),n=$("#shelter .resContent"),t=$("#shelter .tool .login"),s=$("#shelter .tool .register"),o=$("#shelter .resContent ul li .idname"),i=$("#shelter .resContent ul li .idpw"),r=$("#shelter .resContent ul li .username"),g=$("#shelter .resContent ul li .password"),v=$("#shelter .resContent .mail"),f=$("#shelter .resContent ul li .ver"),C=($("#shelter .resContent .sub"),$("#shelter .resContent .tip2"));t.click(function(){$(this).addClass("choosed"),s.removeClass("choosed"),n.css("display","none"),e.css("display","inline-block"),d.css("height","300px"),h.css("top","160px"),l(),a.val(""),c.val(""),u.val(""),p.text("")}),s.click(function(){$(this).addClass("choosed"),t.removeClass("choosed"),e.css("display","none"),n.css("display","inline-block"),d.css("height","350px"),l(),o.val(""),i.val(""),r.val(""),g.val(""),v.val(""),f.val(""),C.text("")})})()};(function(){$(document).on("click","#user",function(){$("#shelter").css("display","inline-block")})})();e()});